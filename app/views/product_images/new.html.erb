<h1>Add Photo</h1>
<hr>

<div id="spin">

</div>

<% if @images.empty? %>
  <div class="well">  
    <div class="row">
      <div class="col-xs-12 col-md-3">
        <%= image_tag "shirt.png", class: 'square item_image' %>
      </div>
      <div class="col-xs-12 col-md-9">
        <h3>To get started, please upload images of your item below.</h3>
      </div>
    </div>
    <!-- row -->
  </div>
  <!-- well -->
<% else %>
  <div class="well">  
    <div class="row">
      <% @images.each do |image| %>
        <div class="col-xs-12 col-md-3">
          <%= image_tag image.photo.thumb.url, class: 'square item_image' %>
        </div>
      <% end %> 
    </div>
    <!-- row -->
  </div>
  <!-- well -->
<% end %>
<!-- if @images -->

<div class="row">
  <div class="col-xs-12 col-md-offset-3 col-md-6">
    <%= simple_form_for @product_image, url: product_images_path(image_upload_id: params[:image_upload_id]), method: :post do |f| %>
      <label id="file_submit" class = 'btn btn-success btn-lg btn-block'>
        <%= f.file_field :photo, style: 'display:none;', onchange: "submit_form();" %>
        <i class="fa fa-plus-circle"></i> Add New Photo
      </label>
    <% end %>

    <br>
    <%= link_to 'Next', new_item_path(image_upload_id: params[:image_upload_id]), class: 'btn btn-primary btn-lg btn-block' %>

    <%= link_to 'Cancel', dashboard_path, class: 'btn btn-danger btn-lg btn-block' unless params[:image_upload_id] %>
    <%= link_to 'Cancel', image_upload_path(params[:image_upload_id]), method: :delete, class: 'btn btn-danger btn-lg btn-block', data: {confirm: "Are you sure?"} if params[:image_upload_id] %>
  </div>
</div>


<script type="text/javascript">
function submit_form(){
  var spinner = new Spinner(opts).spin(target);
  $('#new_product_image').submit();
}

var opts = {
  lines: 13 // The number of lines to draw
, length: 28 // The length of each line
, width: 14 // The line thickness
, radius: 42 // The radius of the inner circle
, scale: 1 // Scales overall size of the spinner
, corners: 1 // Corner roundness (0..1)
, color: '#000' // #rgb or #rrggbb or array of colors
, opacity: 0.25 // Opacity of the lines
, rotate: 0 // The rotation offset
, direction: 1 // 1: clockwise, -1: counterclockwise
, speed: 1 // Rounds per second
, trail: 60 // Afterglow percentage
, fps: 20 // Frames per second when using setTimeout() as a fallback for CSS
, zIndex: 2e9 // The z-index (defaults to 2000000000)
, className: 'spinner' // The CSS class to assign to the spinner
, top: '50%' // Top position relative to parent
, left: '50%' // Left position relative to parent
, shadow: false // Whether to render a shadow
, hwaccel: false // Whether to use hardware acceleration
, position: 'absolute' // Element positioning
}
var target = document.getElementById('spin')
</script>