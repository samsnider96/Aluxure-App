<h1>Select Items</h1>

<div class="list-group scrollable" style="cursor: pointer; cursor: hand;">

  <% @items.each do |item| %>

    <a class="list-group-item" id="item_<%= item.id %>">
      <div class="row">

        <div class="col-xs-2">
          <div class="thumbnail">
            <% if item.product_images.empty? %>
              <%= image_tag 'shirt.png', class: 'item_image_sm' %>
            <% else %>
              <%= image_tag ProductImage.find_by(item_id: item.id).photo.thumb.url, class: 'item_image' %>
            <% end %>
          </div>
        </div>

        <div class="col-xs-10">
          <div class="row">
            <div class="col-xs-12 col-md-6">
              <div class="panel">
                <div class="panel-body">
                  <ul style="list-style-type:none;padding-left:0px">
                    <li><strong>Brand:</strong> <%= item.brand %></li>
                    <li><strong>Category:</strong> <%= item.category %></li>
                    <% unless item.sub_category.empty? %>
                      <li><strong>Sub Category:</strong> <%= item.sub_category %></li>
                    <% end %>
                    <li><strong>Color:</strong> <%= item.color %></li>
                  </ul>
                </div>
                <!-- panel-body -->
              </div>
              <!-- panel -->
            </div>
            <!-- col-xs-12 col-md-6 -->

            <div class="col-xs-12 col-md-6">
               <div class="panel">
                <div class="panel-body">
                  <ul style="list-style-type:none;padding-left:0px">
                    <li><strong>Size:</strong> <%= item.size %></li>
                    <% unless item.sleeve_length.empty? %>
                      <li><strong>Sleeve Length:</strong> <%= item.sleeve_length %></li>
                    <% end %>
                    <% unless item.inseam_length.empty? %>
                      <li><strong>Inseam Length:</strong> <%= item.inseam_length %></li>
                    <% end %>
                    <% unless item.suit_length.empty? %>
                      <li><strong>Suit Length:</strong> <%= item.suit_length %></li>
                    <% end %>
                    <% unless item.shoe_width.empty? %>
                      <li><strong>Shoe Width:</strong> <%= item.shoe_width %></li>
                    <% end %>
                    <li><strong>Material:</strong> <%= item.material %></li>
                    <li><strong>Condition:</strong> <%= item.condition %></li>
                    <!-- <li><strong>Description:</strong> <%= item.description %></li> -->
                  </ul>
                </div>
                <!-- panel-body -->
              </div>
              <!-- panel -->
            </div>
            <!-- col-xs-12 col-md-6 -->
          </div>
          <!-- row -->
        </div>

      </div>
    </a>

    <script>

    $("#item_<%= item.id %>").click(function(){
      var item_id = "<%= item.id %>";

      // set to active
      $(this).toggleClass("active");

      // push in array if it doesn't exist already, otherwise pop the element
      if ($.inArray(item_id, items) === -1) {
        items.push(item_id);
      } else {
        items.pop();
      }
    })

    </script>

  <% end %>

</div>

<button class="btn btn-success btn-lg btn-block" id="item_select_next"><i class="fa fa-chevron-circle-right"></i> Next</button>

<script type="text/javascript">
var items = [];

$("#item_select_next").click(function(){
  if (items.length === 0) {
    alert("Please select atleast 1 item");
  } 
  else {
    $.post("/item_selections",
    {
        item_ids: items
    },
    function(data, status){
        window.location.replace("/company_selections/new?item_ids=" + items);
    });
  }
})
</script>